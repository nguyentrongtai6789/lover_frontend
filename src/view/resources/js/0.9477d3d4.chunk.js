(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1255:function(e,a,t){"use strict";var n=t(0),c=t.n(n),r=t(1256),l=t(5),o=t(16);a.a=c.a.memo(function(e){var a=e.url;return c.a.createElement(r.FacebookButton,{url:a||"https://playerduo.net",appId:o.facebook.appId,windowOptions:["width=500","height=600"],className:"btn-share-fb"},c.a.createElement(l.b,{id:"share"})," ",c.a.createElement("i",{className:"fab fa-facebook-f"}))})},1278:function(e,a,t){"use strict";var n=t(2),c=t(34),r=t(33),l=t(0),o=t.n(l),i=t(35),s=t(76),m=t(200),d=t(351),u=t(129),f=t(70),p=t(7),E=t.n(p),b=t(1279),g=t(1206),h=t(1204),j=t(9),N=t(16),k=t(3),y=t(106),v=t(1242),O=t(1255),S=o.a.memo(function(e){var a=e.loading,t=e.dataStory,i=e.visible,s=e.dispatch,d=e.handleStory,u=e.dataMyStory,f=e.handleFetchData,p=e.likeStory,S=e.setShowModalDonate,_=Object(l.useState)(!1),C=Object(r.a)(_,2),w=C[0],I=C[1],A=Object(l.useState)(!1),L=Object(r.a)(A,2),D=L[0],x=L[1],T=Object(l.useState)(0),U=Object(r.a)(T,2),R=U[0],V=U[1],M=Object(l.useState)(""),B=Object(r.a)(M,2),F=B[0],P=B[1],z=Object(l.useState)([]),J=Object(r.a)(z,2),K=J[0],H=J[1],$=Object(l.useState)({}),G=Object(r.a)($,2),Z=G[0],q=G[1];Object(l.useEffect)(function(){q(t)},[t]),Object(l.useEffect)(function(){i&&(P(""),H([]))},[i]),Object(l.useEffect)(function(){i&&!a&&window.addEventListener("keydown",Q,!0)},[a]);var Q=function e(a){a.shiftKey||(window.removeEventListener("keydown",e,!0),"ArrowLeft"===a.key&&W("left"),"ArrowRight"===a.key&&W("right"))},W=function(e){if("left"===e&&u.length>1&&R>0)return f({data:u,obj:u[R-1]}),V(R-1);if("right"===e&&u.length>1&&u.length-1>R)return f({data:u,obj:u[R+1]}),V(R+1);if(e!==F&&K.length>0){f({data:[],obj:K[K.length-1]});var a=Object(c.a)(K);return a.splice(K.length-1,1),H(a)}E()(t,"nextId._id")&&(K.length>190?H([].concat(Object(c.a)(K.slice(Math.max(K.length-190,0))),[t])):H([].concat(Object(c.a)(K),[t])),f({data:[],obj:t.nextId,prevIds:[].concat(Object(c.a)(K),[t])}),V(0),P(e))};return o.a.createElement("div",{className:"modal__action--center"},u.length>1?o.a.createElement("div",{className:"hr-cross"},u.map(function(e,a){return o.a.createElement("p",{key:e._id+a,className:R===a?"active":""})})):null,o.a.createElement(m.a,{className:"btn-prev",onClick:function(){return W("left")},disabled:a},a?o.a.createElement("i",{className:"fa fa-spinner fa-spin"}):o.a.createElement("i",{className:"far fa-angle-left"})),o.a.createElement("video",{playsInline:!0,autoPlay:!0,mediatype:"video",loop:!0,controls:!0,controlsList:"nodownload",poster:k.g.getLinkThumbVideo(t.thumbnail),src:"".concat(N.SVSpacesEndpoint,"/stories/").concat(t.video)}),o.a.createElement(m.a,{className:"btn-next",onClick:function(){return W("right")},disabled:a},a?o.a.createElement("i",{className:"fa fa-spinner fa-spin"}):o.a.createElement("i",{className:"far fa-angle-right"})),E()(t,"user._id")===localStorage.idUser||"admin"===localStorage.role?o.a.createElement(b.a,{className:"btn-choose"},o.a.createElement(g.a,{bsStyle:"default",pullRight:!0,title:o.a.createElement("i",{className:"fas fa-ellipsis-v"}),noCaret:!0},o.a.createElement(h.a,{onClick:function(){return I(!0)}},o.a.createElement("i",{className:"fas fa-trash"}),o.a.createElement(j.a,{id:"delete"})),o.a.createElement(h.a,{onClick:function(){return s(d({id:t._id,method:"PUT",body:{isAcceptComment:!t.isAcceptComment}}))}},t.isAcceptComment?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fas fa-comment-alt-slash"}),o.a.createElement(j.a,{id:"userPlayer.lockcomment"})):o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fas fa-comment-alt"}),o.a.createElement(j.a,{id:"group.commenton"}))))):null,o.a.createElement(m.a,{className:"btn-like ".concat(localStorage.token?"":"hidden"," ").concat(Z.liked?"checked":""),onClick:function(){localStorage.token&&(q(Object(n.a)({},t,{liked:!Z.liked})),s(p({id:t._id,method:"POST"})))}},o.a.createElement("i",{className:"fas fa-heart"})),o.a.createElement(m.a,{className:"btn-donate",disabled:!localStorage.token||localStorage.idUser===E()(t,"user._id"),onClick:function(){return S(!0)}},o.a.createElement("i",{className:"fas fa-gift"})),o.a.createElement(g.a,{componentClass:"share",dropup:!0,pullRight:!0,title:o.a.createElement("i",{className:"fas fa-share"}),noCaret:!0},o.a.createElement(v.CopyToClipboard,{text:"".concat(window.location.origin,"/stories/").concat(t._id)},o.a.createElement(h.a,null,o.a.createElement("i",{className:"far fa-link"})," Copy Link")),o.a.createElement(h.a,null,o.a.createElement(O.a,{url:"".concat(window.location.origin,"/stories/").concat(t._id)}))),w?o.a.createElement(y.a,{message:o.a.createElement(j.a,{id:"group.notifydelstory",mess:"Story"}),close:function(){return I(!1)},confirm:function(){x(!0),s(d({id:t._id,method:"DELETE"}))},isLoading:D}):null)}),_=t(1209),C=t(175),w=t(5),I=t(30),A=t(347),L=t.n(A),D=t(261),x=o.a.memo(function(e){var a=e.dataStory,t=e.commentStory,n=(e.setShowModalDonate,e.content),c=e.setContent,i=e.loading,s=e.dispatch,d=e.hideModal,u=Object(l.useState)(!1),p=Object(r.a)(u,2),b=p[0],g=p[1],h=Object(l.useState)({}),N=Object(r.a)(h,2),v=N[0],O=N[1],S=Object(l.useState)({}),A=Object(r.a)(S,2),x=A[0],T=A[1],U=Object(l.useRef)();Object(l.useEffect)(function(){U.current&&t.length>5&&t.length<=15&&U.current.scrollIntoView()},[t]);var R=function(e){if(!e.shiftKey&&13===e.charCode&&n&&a.isAcceptComment&&!a.isBlocked&&k.d.filterChar(n)){var t={content:n.replace(/donate|Donate|DONATE/g,"dnt").replace(/\ud83c\udf81/g,"")};x._id&&(t.replyCommentId=x._id),x._id&&(t.replyName=x.user.name),s(Object(f.r)(a._id,t,x._id?"/reply":"")),c(""),T({}),!e.click&&e.preventDefault()}},V=function(e,t,n,c){if(E()(a,"user._id")===localStorage.idUser){if(1===e)return!0;if(2===e)return s(Object(f.g)(c,n,a._id))}if("admin"===localStorage.role||localStorage.idUser===t){if(1===e)return!0;if(2===e)return s(Object(f.g)(c,n))}return!1},M=function(e){var a=e.replace(/script|localStorage|document|fetch|cookie/g,"");return a=(a=a.replace(/(https?:\/\/[^\s]+)\b([-a-zA-Z0-9@:%_.~#?&//=]*)/g,"<a target='_blank' href='$1' class='link'>$1</a>")).replace(/<3/g,"\u2764"),L()(a)};return o.a.createElement("div",{className:"modal__action--right"},o.a.createElement("div",{className:"card-top"},o.a.createElement(_.a,{className:"media-player"},o.a.createElement(_.a.Left,{className:"media-middle"},o.a.createElement("a",{href:"/".concat(E()(a,"user.url")||"page"+E()(a,"user._id")),target:"_blank",rel:"noopener noreferrer"},o.a.createElement(D.a,{size:"sm",url:k.d.getLinkImage(E()(a,"user.avatar")),rankVip:E()(a,"user.rank")}))),o.a.createElement(_.a.Body,{className:"media-middle"},o.a.createElement(I.b,{to:"/stories?user=".concat(E()(a,"user._id")),onClick:function(){localStorage.setItem(E()(a,"user._id"),JSON.stringify(E()(a,"user"))),d()}},o.a.createElement("p",{className:k.e.classOfVipName(E()(a,"user.rank"))},E()(a,"user.name","\u3164")),o.a.createElement("p",null,o.a.createElement(w.c,{value:a.createdAt||0})))),o.a.createElement(_.a.Right,{className:"media-middle"},o.a.createElement("a",{href:"/".concat(E()(a,"user.playerSetting.url")),target:"_blank",rel:"noopener noreferrer"},o.a.createElement(m.a,{bsStyle:"danger"},o.a.createElement(w.b,{id:"button.thue"}))))),o.a.createElement("div",{className:"media-interact"},o.a.createElement("div",{className:"interact"},o.a.createElement("i",{className:"fas fa-eye"}),a.countView||0),o.a.createElement("div",{className:"interact"},o.a.createElement("i",{className:"fas fa-comment-alt"}),a.countComment||0),o.a.createElement("div",{className:"interact"},o.a.createElement("i",{className:"fas fa-heart"}),a.countLike||0)),o.a.createElement("div",{className:"description"},o.a.createElement("p",{className:"note"},M(a.content||"")),o.a.createElement("p",{className:"hashtag"},E()(a,"themeTags",[]).map(function(e,a){return o.a.createElement(I.b,{key:e+a,to:"/stories?tag=".concat(e),onClick:d},o.a.createElement("span",null,"#",e))})))),o.a.createElement("div",{className:"card-bottom"},o.a.createElement("div",{className:"list-comment"},t.length&&t.length%15===0?o.a.createElement("p",{className:"see-more",onClick:function(){return!i&&s(Object(f.h)(a._id,t[0]._id))}},o.a.createElement("i",{className:"far ".concat(i?"fa-spinner fa-spin":"fa-chevron-double-up")})):o.a.createElement("div",null),t.map(function(e,a){return o.a.createElement(_.a,{className:"media-player",key:e._id},o.a.createElement(_.a.Left,{className:"media-middle"},o.a.createElement("a",{href:"/".concat(E()(e,"user.url")||"page"+E()(e,"user._id")),target:"_blank",rel:"noopener noreferrer"},o.a.createElement(D.a,{size:"sm",url:k.d.getLinkImage(E()(e,"user.avatar")),rankVip:E()(e,"user.rank")}))),o.a.createElement(_.a.Body,{className:"media-middle"},o.a.createElement("a",{href:"/".concat(E()(e,"user.url")||"page"+E()(e,"user._id")),target:"_blank",rel:"noopener noreferrer"},o.a.createElement("p",{className:k.e.classOfVipName(E()(e,"user.rank"))},E()(e,"user.name"))),o.a.createElement("p",null,o.a.createElement(w.c,{value:e.createdAt||0}),V(1,E()(e,"user._id"))?o.a.createElement("span",{className:"delete-comment",onClick:function(){g(!0),O({idUser:E()(e,"user._id"),index:a,idComment:e._id})}}," \xb7 ",o.a.createElement(w.b,{id:"delete"})):null,E()(e,"user._id")!==localStorage.idUser?o.a.createElement("span",{className:"rep-comment",onClick:function(){return T(e)}}," \xb7 ",o.a.createElement(w.b,{id:"title.answer"})):null),o.a.createElement("p",{className:"comment"},e.payload&&o.a.createElement("span",null,e.payload.replyName.substring(0,20),e.payload.replyName.length>19&&"...")," ",M(e.content||""))))}),o.a.createElement("div",{ref:U})),o.a.createElement("div",{className:"form-comment"},o.a.createElement("div",{className:"box-comment"},x.user?o.a.createElement("p",{className:"diplay-rep",onClick:function(){return T({})}},o.a.createElement("i",{className:"fal fa-times"})," \xb7 ",o.a.createElement(w.b,{id:"title.answer"}),": ",o.a.createElement("span",null,x.user.name)):null,o.a.createElement(C.a,{type:"text",maxLength:160,placeholder:"".concat(localStorage.token&&a.isAcceptComment&&!a.isBlocked?"":"Off ","Comment..."),value:n,onChange:function(e){return c(e.target.value)},onKeyPress:R,disabled:!localStorage.token||!a.isAcceptComment||a.isBlocked}),o.a.createElement("i",{className:"fal fa-paper-plane",onClick:function(){return R({charCode:13,click:!0})}})))),b?o.a.createElement(y.a,{message:o.a.createElement(j.a,{id:"group.notifydelstory",mess:"comment"}),close:function(){return g(!1)},confirm:function(){g(!1),v.idUser&&V(2,v.idUser,v.index,v.idComment)}}):null)}),T=(t(1293),Object(l.forwardRef)(function(e,a){var t=Object(l.useState)(""),p=Object(r.a)(t,2),b=p[0],g=p[1],h=Object(l.useState)(!1),j=Object(r.a)(h,2),N=j[0],k=j[1],y=Object(l.useState)(""),v=Object(r.a)(y,2),O=v[0],_=v[1],C=Object(l.useState)({}),w=Object(r.a)(C,2),I=w[0],A=w[1],L=Object(l.useState)([]),D=Object(r.a)(L,2),T=D[0],U=D[1],R=Object(l.useState)(!1),V=Object(r.a)(R,2),M=V[0],B=V[1],F=Object(i.d)(function(e){return e.group.stories}),P=F.loadDetail,z=F.loading,J=F.commentStory,K=void 0===J?[]:J,H=F.detailStory,$=void 0===H?{}:H,G=Object(i.c)();Object(l.useImperativeHandle)(a,function(){return{handleVisible:function(e,a,t,n){k(e||!1),!t&&e&&(n&&_("?isRandom=false&userId=".concat(n)),Z({data:[],obj:a,param:n?"?isRandom=false&userId=".concat(n):""})),e&&t&&Array.isArray(a)&&Z({data:a,obj:a[0]})}}});var Z=function(e){var a=e.data,t=void 0===a?[]:a,n=e.obj,r=void 0===n?{}:n,l=e.prevIds,o=void 0===l?[]:l,i=e.param,s=void 0===i?"":i,m=o.reduce(function(e,a){return[].concat(Object(c.a)(e),[a._id])},[]),d={Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"};m.length>0&&(d.prevIds=m.toString()),U(t),A(r),r._id&&(G(Object(f.h)(r._id)),G(Object(f.j)({id:r._id,method:"GET",prevIds:d,param:s||O})))};Object(l.useEffect)(function(){N&&$._id&&A(Object(n.a)({},I,$))},[$]);var q=function(){k(!1),_(""),g("")};return o.a.createElement(s.a,{show:N,onHide:function(){return q()},dialogClassName:"custom-modal home"},o.a.createElement("div",{className:"modal__action"},o.a.createElement(S,{loading:P,dataStory:I,visible:N,handleStory:f.j,dispatch:G,dataMyStory:T,handleFetchData:Z,likeStory:f.j,setShowModalDonate:B}),o.a.createElement(x,{dataStory:I,commentStory:K,content:b,setContent:g,loading:z,dispatch:G,hideModal:function(){return q()}}),o.a.createElement(d.a,{show:M,close:function(){return B(!1)},submit:function(e,a,t,n,c){var r={amount:e,displayName:a,message:t,pdUserReceive:n,unlockTime:c,lang:"vi"};G(Object(u.b)(r)),G(Object(f.r)(I._id,{content:"vi"===localStorage.lang?"<strong>\ud83c\udf81 \u0110\xe3 donate ".concat(e.toLocaleString(),"</strong>"):"<strong>\ud83c\udf81 Donated ".concat(e.toLocaleString(),"</strong>")}))},unlockSecurityCode:function(e){return G(Object(u.f)(e))},playerInformation:{playerSetting:{nickName:E()(I,"user.name")},_id:E()(I,"user._id")},isLoading:!1})),o.a.createElement(m.a,{className:"btn-close",onClick:function(){return q()}},o.a.createElement("i",{className:"fal fa-times"})))}));a.a=T},1293:function(e,a,t){}}]);